@model NewsFeedMe.Models.FollowingModel
@{
    ViewBag.Title = "Content";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="@Url.Content("~/Content/spectre.css")" rel="stylesheet" type="text/css" />

@if (ViewBag.Message != null)
{
    <div class="row">
        <div class="alert alert-success container-fluid col-md-4 col-md-offset-4" role="alert">
            <div class="text-center">
                <b>Great! </b><span>@ViewBag.Message</span>
            </div>
        </div>
    </div>

}
<div class="container">
    <h3 class="text-capitalize text-center text-primary">Follow topics, news sources or whatever tickles your fancy</h3>
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3">
            <input id="searchbar" type="text" class="form-control" placeholder="Search" style="max-width:none">
        </div>
        @*<div class="col-sm-1 col-sm-offset-5">
                <a href="@Url.Action("TestContent", "Manage", new { publisherID = "engadget"})" role="button" class="btn btn-success pull-left" title="Test Content"><span class="fa fa-bolt"></span> Save Test Content</a>

            </div>*@
    </div>
    <br />
    <div class="row">
        <div class="col-md-offset-3 col-md-6 panel panel-body" role="alert" hidden="hidden" id="topicsWindow">
            <b>Your Topics: <span class="chip" id="selectedTopics"></span></b>
            <div class="pull-right btn btn-success">Save</div>
        </div>
    </div>
    <div class="container-fluid" id="Publishers">
        @for (int i = 0; i < Model.AllSources.Count; i += 3)
        {
            <div class="row">
                <div class="container-fluid col-sm-4">
                    <div class="card">
                        <div class="card-header">
                            <a href="@Model.AllSources[i].URL" class="pull-right" title="Launch @Model.AllSources[i].Name" target="_blank"><em class="fa fa-external-link large"></em></a>
                            <h3 class="card-title">@Model.AllSources[i].Name</h3>
                        </div>
                            <div class="card-body">
                                <p class="card-text">@Model.AllSources[i].Description.</p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-primary pull-right" id="@Model.AllSources[i].Name"><span class="fa fa-plus"></span></button>
                            </div>
                    </div>
                </div>
                <div class="container-fluid col-sm-4">
                    <div class="card">
                        <div class="card-header">
                            <a href="@Model.AllSources[i+1].URL" class="pull-right" title="Launch @Model.AllSources[i+1].Name" target="_blank"><em class="fa fa-external-link large"></em></a>
                            <h3 class="card-title">@Model.AllSources[i + 1].Name</h3>
                        </div>
                            <div class="card-body">
                                <p class="card-text">@Model.AllSources[i + 1].Description.</p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-primary pull-right" id="@Model.AllSources[i+1].Name"><span class="fa fa-plus"></span></button>
                            </div>
                    </div>
                </div> <div class="container-fluid col-sm-4">
                    <div class="card">
                        <div class="card-header">
                            <a href="@Model.AllSources[i+2].URL" class="pull-right" title="Launch @Model.AllSources[i+2].Name" target="_blank"><em class="fa fa-external-link large"></em></a>
                            <h3 class="card-title">@Model.AllSources[i + 2].Name</h3>
                        </div>
                            <div class="card-body">
                                <p class="card-text">@Model.AllSources[i + 2].Description.</p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-primary pull-right" id="@Model.AllSources[i+2].Name"><span class="fa fa-plus"></span></button>
                            </div>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="row">
        <ul>
            @foreach (var item in Model.AllTopics)
            {
                <li>@item.CID</li>
            }
        </ul>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $('#Publishers button').click(function () {
            var id = $(this).attr('id');
            $('#topicsWindow').show();
            $('#selectedTopics').text(id)
            $(this).removeClass('btn-primary').addClass('btn-success');
        });
    });
</script>